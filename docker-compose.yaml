services:
  tedge:
    build:
      dockerfile: Dockerfile
      context: .
    restart: always
    secrets:
      - source: certificate_private_key
      - source: certificate_public_key
    env_file:
      - .env
    tmpfs:
      - /tmp

secrets:
  certificate_private_key:
    file: device-certs/tedge-private-key.pem

  certificate_public_key:
    file: device-certs/tedge-certificate.pem
